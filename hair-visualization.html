<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Micron Scale Visualization: Curly Hair</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --text-color: #2d3436;
            --accent-color: #d63031;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Prevent scroll on body */
        }

        /* --- Layout --- */
        .container {
            display: flex;
            flex: 1;
            height: 100%;
        }

        /* Left Side: Content */
        .content-section {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            max-width: 600px;
            z-index: 10;
            background: var(--bg-color); /* Ensure text legibility */
        }

        h1 { font-size: 2.5rem; margin-bottom: 20px; letter-spacing: -1px; }
        .highlight { color: var(--accent-color); font-weight: 700; }
        .explanation { font-size: 1.2rem; line-height: 1.6; margin-bottom: 30px; border-left: 4px solid var(--accent-color); padding-left: 20px; }
        .note { font-size: 0.9rem; color: #636e72; margin-top: auto; }

        /* Right Side: Interactive Visual */
        .visual-section {
            flex: 1.5; /* Give visual more space */
            background-color: #e1e4e8;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: grab;
            perspective: 1200px; /* Deeper perspective for better 3D view */
            box-shadow: inset 10px 0 20px rgba(0,0,0,0.05);
        }

        .visual-section:active { cursor: grabbing; }

        .drag-hint {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #636e72;
            font-size: 0.8rem;
            pointer-events: none;
            opacity: 0.7;
            background: rgba(255,255,255,0.6);
            padding: 5px 10px;
            border-radius: 15px;
        }

        /* --- 3D Curly Hair Implementation --- */
        
        /* The main rotating container holding all segments */
        .hair-container-3d {
            position: relative;
            width: 100px; /* Base width for center alignment */
            height: 100%;
            transform-style: preserve-3d; /* Crucial for nested 3D elements */
            display: flex;
            justify-content: center;
            align-items: center;
            /* Initial tilt for better viewing angle */
             transform: rotateX(10deg); 
        }

        /* Individual segment of the curl */
        .hair-segment {
            position: absolute;
            /* This width represents the 100 microns visually */
            width: 80px; 
            height: 6px; /* Short height to make the curve smooth */
            background: linear-gradient(to right, #2a1a11, #5d3a29, #8b5e3c, #5d3a29, #2a1a11);
            border-radius: 3px;
            backface-visibility: visible;
            /* Slight texture */
            box-shadow: inset 0 1px 2px rgba(255,255,255,0.1), inset 0 -1px 2px rgba(0,0,0,0.3);
        }

        /* Floating width marker */
        .floating-marker {
            position: absolute;
            top: 40%;
            right: 20%;
            display: flex;
            align-items: center;
            pointer-events: none;
            color: #d63031;
            font-weight: bold;
        }
        .marker-line {
            width: 80px; /* Matches hair segment width visually */
            height: 2px;
            background: #d63031;
            margin-right: 10px;
            position: relative;
        }
        .marker-line::before, .marker-line::after {
            content: ''; position: absolute; height: 10px; width: 2px; background: #d63031; top: -4px;
        }
        .marker-line::before { left: 0; }
        .marker-line::after { right: 0; }


        /* Mobile Responsive */
        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .content-section { flex: 0 0 auto; padding: 30px 20px; }
            h1 { font-size: 1.8rem; }
            .visual-section { flex: 1; min-height: 50vh; box-shadow: inset 0 10px 20px rgba(0,0,0,0.05); }
            .floating-marker { right: 5%; top: 20%;}
        }
    </style>
</head>
<body>

    <div class="container">
        <section class="content-section">
            <h1>Size Comparison</h1>
            <div class="explanation">
                <p>A single strand of human hair (shown here as curly and brown) is approximately <span class="highlight">100 microns</span> wide.</p>
                <p>Mold spores are typically <span class="highlight">2 to 20 microns</span>.</p>
                <p style="font-size: 0.95em; color: #555; margin-top: 20px;">You could fit roughly <strong>5 to 50 mold spores</strong> across the width of the hair strand shown.</p>
            </div>
            <p class="note">Reference: Typical human hair width ranges from 17 to 181 µm.</p>
        </section>

        <section class="visual-section" id="visualArea">
             <div class="floating-marker">
                <div class="marker-line"></div>
                <span>~100 µm width</span>
            </div>

            <div class="hair-container-3d" id="hairObject">
                </div>

            <div class="drag-hint">Drag to spin the curly strand</div>
        </section>
    </div>

    <script>
        // --- Generate the 3D Curly Hair ---
        function generateCurlyHair() {
            const hairContainer = document.getElementById('hairObject');
            const numSegments = 150; // Number of slices to make it look smooth
            const curls = 3.5; // How many full loops the curl makes
            const heightSpread = 4; // Vertical distance between segments
            const curlRadius = 35; // How wide the curl circle is

            for (let i = 0; i < numSegments; i++) {
                const segment = document.createElement('div');
                segment.className = 'hair-segment';
                
                // Calculate position in the spiral
                const percentage = i / numSegments;
                // Center the vertical stack
                const yPos = (i * heightSpread) - (numSegments * heightSpread / 2);
                const angle = percentage * 360 * curls;
                
                // The magic 3D transform:
                // 1. Move up/down (translateY)
                // 2. Rotate around center (rotateY)
                // 3. Push outwards to form ring (translateZ)
                // 4. Slight rotateX to angle the segment to match the curl slope
                segment.style.transform = `
                    translateY(${yPos}px) 
                    rotateY(${angle}deg) 
                    translateZ(${curlRadius}px)
                    rotateX(-15deg) 
                `;
                
                hairContainer.appendChild(segment);
            }
        }

        // Initialize hair generation
        generateCurlyHair();


        // --- Interaction Logic (Spinning) ---
        const container = document.getElementById('visualArea');
        const hair = document.getElementById('hairObject');
        
        let isDragging = false;
        let startX = 0;
        let currentRotation = 0;
        let previousRotation = 0;
        let initialTilt = 10; // Matches CSS rotateX

        // Mouse Events
        container.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX;
            container.style.cursor = 'grabbing';
            e.preventDefault();
        });

        window.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const deltaX = e.clientX - startX;
            currentRotation = previousRotation + (deltaX * 0.5);
            // Keep the initial X tilt, only rotate Y based on drag
            hair.style.transform = `rotateX(${initialTilt}deg) rotateY(${currentRotation}deg)`;
        });

        window.addEventListener('mouseup', () => {
            if (isDragging) {
                isDragging = false;
                container.style.cursor = 'grab';
                previousRotation = currentRotation;
            }
        });

        // Touch Events (Mobile)
        container.addEventListener('touchstart', (e) => {
            isDragging = true;
            startX = e.touches[0].clientX;
        }, { passive: false });

        window.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            if(e.cancelable) e.preventDefault();
            const deltaX = e.touches[0].clientX - startX;
            currentRotation = previousRotation + (deltaX * 0.5);
            hair.style.transform = `rotateX(${initialTilt}deg) rotateY(${currentRotation}deg)`;
        }, { passive: false });

        window.addEventListener('touchend', () => {
            isDragging = false;
            previousRotation = currentRotation;
        });
    </script>
</body>
</html>
