<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Clone v10.0 - Ultimate Wiki</title>
    <style>
        :root { --primary: #567d46; --sec: #0077ff; --accent: #ff9900; --dark: #222; --light: #f4f4f9; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; line-height: 1.6; color: #333; max-width: 960px; margin: 0 auto; padding: 20px; background: var(--light); }
        
        /* Header */
        header { border-bottom: 4px solid var(--primary); padding-bottom: 20px; margin-bottom: 30px; }
        h1 { margin: 0; color: var(--primary); font-size: 2.5rem; }
        .version { background: var(--accent); color: white; padding: 2px 8px; border-radius: 4px; font-size: 1rem; vertical-align: middle; }
        
        /* Navigation */
        .nav { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 40px; }
        .nav a { text-decoration: none; color: #444; background: white; padding: 8px 16px; border-radius: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); font-weight: 600; transition: 0.2s; }
        .nav a:hover { background: var(--sec); color: white; transform: translateY(-2px); }

        /* Sections */
        section { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 30px; }
        h2 { color: var(--sec); margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        h3 { border-left: 4px solid var(--accent); padding-left: 10px; margin-top: 25px; color: #444; }

        /* Code & Tags */
        code { background: #eee; padding: 2px 5px; border-radius: 4px; font-family: 'Consolas', monospace; color: #d63384; }
        pre { background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; overflow-x: auto; }
        .tag { font-size: 0.75rem; padding: 2px 6px; border-radius: 4px; color: white; font-weight: bold; text-transform: uppercase; margin-left: 8px; }
        .tag.new { background: var(--accent); }
        .tag.core { background: var(--primary); }
        .tag.tech { background: #6610f2; }

        /* Tables */
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #eee; }
        th { color: var(--sec); }

        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .card { border: 1px solid #eee; padding: 15px; border-radius: 8px; background: #fafafa; }
        .card h4 { margin: 0 0 10px 0; color: #333; }
    </style>
</head>
<body>

    <header>
        <h1>Minecraft Clone <span class="version">v10.0</span></h1>
        <p>A single-file, mobile-first voxel engine built with Three.js.</p>
    </header>

    <div class="nav">
        <a href="#getting-started">üöÄ Start</a>
        <a href="#environment">‚òÄÔ∏è Environment</a>
        <a href="#hydro">üåä Hydro System</a>
        <a href="#mobs">ü¶Ä Living World</a>
        <a href="#engine">‚öôÔ∏è Engine Tech</a>
        <a href="#audio">üîä Audio</a>
    </div>

    <section id="getting-started">
        <h2>üöÄ Getting Started</h2>
        <p>v10.0 is the "Day & Night" update. It runs entirely in the browser using WebGL and Web Audio API.</p>
        
        <h3>Requirements</h3>
        <ul>
            <li><strong>Device:</strong> Mobile Phone (iOS/Android) or Desktop.</li>
            <li><strong>Orientation:</strong> Landscape Mode is enforced via overlay.</li>
            <li><strong>Server:</strong> Due to browser security (CORS/Audio), use a local server (VS Code Live Server) or host on GitHub Pages.</li>
        </ul>

        <h3>Controls</h3>
        <ul>
            <li><strong>Left Joystick:</strong> Move (Forward/Back/Strafing).</li>
            <li><strong>Right Screen:</strong> Drag to Look.</li>
            <li><strong>Tap Right:</strong> Place Block.</li>
            <li><strong>Hold Right (500ms):</strong> Break Block.</li>
            <li><strong>Jump Button:</strong> Jump / Swim Up.</li>
        </ul>
    </section>

    <section id="environment">
        <h2>‚òÄÔ∏è The Day/Night Cycle <span class="tag new">New in v10.0</span></h2>
        <p>The world now features a dynamic time system that affects lighting, sky color, and fog.</p>
        
        <div class="feature-grid">
            <div class="card">
                <h4>Dynamic Sun</h4>
                <p>A DirectionalLight rotates around the map (0,0,0) based on `sunAngle`. Shadows and glare update in real-time.</p>
            </div>
            <div class="card">
                <h4>Procedural Sky Shader</h4>
                <p>Custom GLSL shader. It mixes <code>topColor</code> and <code>bottomColor</code> based on the sun's Y position. It creates Blue days, Orange sunsets, and Black nights.</p>
            </div>
            <div class="card">
                <h4>Fog Integration</h4>
                <p>The `scene.fog` color updates every frame to match the sky horizon, ensuring seamless distance rendering.</p>
            </div>
        </div>
    </section>

    <section id="hydro">
        <h2>üåä Hydro & Physics System</h2>
        <p>Complex interactions for water-based gameplay.</p>

        <h3>1. River Generation</h3>
        <p>We use a secondary Perlin-like noise function to "carve" rivers out of the terrain.</p>
        <code>if (Math.abs(riverNoise) < 0.2) height = RIVER_BED_LEVEL;</code>

        <h3>2. Whirlpools</h3>
        <p>Dangerous entities spawned in the ocean.</p>
        <ul>
            <li><strong>Visual:</strong> A rotating blue plane mesh using <code>opacity: 0.8</code>.</li>
            <li><strong>Physics:</strong> A distance check runs every frame. If <code>dist < 2.5</code>, the player is sucked in, pushed down, and the camera spins.</li>
        </ul>

        <h3>3. Buoyancy</h3>
        <p>When entering water blocks:</p>
        <ul>
            <li>Gravity is reduced (Floating).</li>
            <li>Velocity is dampened (Drag/Resistance).</li>
            <li>Jump button acts as "Swim Up".</li>
        </ul>
    </section>

    <section id="mobs">
        <h2>ü¶Ä The Living World</h2>
        <p>The world is populated by procedural voxel mobs. They are constructed using `THREE.Group` and primitives.</p>

        <table>
            <thead>
                <tr>
                    <th>Mob</th>
                    <th>Color</th>
                    <th>Behavior</th>
                    <th>Spawn Condition</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Fish</strong></td>
                    <td>Orange</td>
                    <td>Swims in circles underwater.</td>
                    <td>Water blocks (Low chance).</td>
                </tr>
                <tr>
                    <td><strong>Crab</strong></td>
                    <td>Red</td>
                    <td>Scuttles side-to-side.</td>
                    <td>Sand blocks at water level.</td>
                </tr>
                <tr>
                    <td><strong>Bird</strong></td>
                    <td>White</td>
                    <td>Flies in wide circles overhead.</td>
                    <td>Sky above Grass blocks.</td>
                </tr>
            </tbody>
        </table>
    </section>

    <section id="engine">
        <h2>‚öôÔ∏è Engine Technology</h2>
        
        <h3>Async Terrain Loading <span class="tag tech">Optimization</span></h3>
        <p>To prevent the phone from freezing on load, the world generates in "batches".</p>
        <pre>
function generateBatch() {
    let startTime = performance.now();
    // Run generation for only 15ms per frame
    while (performance.now() - startTime < 15) {
        generateRow(currentX);
    }
    requestAnimationFrame(generateBatch);
}</pre>
        <p>This keeps the UI responsive (60 FPS) while the heavy math runs in the background.</p>

        <h3>Voxel Collision</h3>
        <p>We use a <code>Map&lt;String, Mesh&gt;</code> for O(1) collision lookups. We round the player's float position to integers to check if a block exists.</p>
    </section>

    <section id="audio">
        <h2>üîä Audio Engine</h2>
        <p>We do not use mp3/wav files to keep the project single-file. We use the <strong>Web Audio API</strong>.</p>

        <h3>The "Hard Unlock" Fix</h3>
        <p>Mobile browsers mute audio contexts until a user gesture occurs. In v10.0, the "START GAME" button executes a silent buffer play to force the audio engine to wake up.</p>

        <h3>Synthesizer</h3>
        <ul>
            <li><strong>Break Sound:</strong> A Square wave with a rapid exponential frequency drop (mimics a crunch).</li>
            <li><strong>Bird Chirp:</strong> A high-frequency Sine wave with a quick envelope.</li>
        </ul>
    </section>

</body>
</html>
